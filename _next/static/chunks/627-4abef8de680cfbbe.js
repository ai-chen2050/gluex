(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{970:function(e,t,a){"use strict";a.d(t,{xR:function(){return et},ug:function(){return j},Il:function(){return A}});var n=a(7294),s=a(1664),r=a.n(s),i=a(4306),o=a(4718),l=a(9499),c=a(29),u=a(7794),d=a.n(u),m=a(1755),p=a(1118),b=(0,a(4671).Z)(function(e,t){var a;return{balance:0,getUserSOLBalance:(a=(0,c.Z)(d().mark(function t(a,n){var s;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=0,t.prev=1,t.next=4,n.getBalance(a,"confirmed");case 4:s=t.sent/m.LAMPORTS_PER_SOL,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("error getting balance: ",t.t0);case 11:e(function(e){e.balance=s,console.log("balance updated, ",s)});case 12:case"end":return t.stop()}},t,null,[[1,8]])})),function(e,t){return a.apply(this,arguments)})}}),g=a(5893);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var f=function(){var e=(0,o.R)().connection,t=(0,i.O)().publicKey,a=b().getUserSOLBalance,s=(0,n.useCallback)((0,c.Z)(d().mark(function n(){var s,r;return d().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=4;break}return console.log("error","Wallet not connected!"),(0,p.h)({type:"error",message:"error",description:"Wallet not connected!"}),n.abrupt("return");case 4:return s="",n.prev=5,n.next=8,e.requestAirdrop(t,m.LAMPORTS_PER_SOL);case 8:return s=n.sent,n.next=11,e.getLatestBlockhash();case 11:return r=n.sent,n.next=14,e.confirmTransaction(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach(function(t){(0,l.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({signature:s},r),"confirmed");case 14:(0,p.h)({type:"success",message:"Airdrop successful!",txid:s}),a(t,e),n.next=22;break;case 18:n.prev=18,n.t0=n.catch(5),(0,p.h)({type:"error",message:"Airdrop failed!",description:null===n.t0||void 0===n.t0?void 0:n.t0.message,txid:s}),console.log("error","Airdrop failed! ".concat(null===n.t0||void 0===n.t0?void 0:n.t0.message),s);case 22:case"end":return n.stop()}},n,null,[[5,18]])})),[t,e,a]);return(0,g.jsx)("div",{className:"flex flex-row justify-center",children:(0,g.jsxs)("div",{className:"relative group items-center",children:[(0,g.jsx)("div",{className:"m-1 absolute -inset-0.5 bg-gradient-to-r from-indigo-500 to-fuchsia-500  rounded-lg blur opacity-20 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-tilt"}),(0,g.jsx)("button",{className:"px-8 m-2 btn animate-pulse bg-gradient-to-br from-indigo-500 to-fuchsia-500 hover:from-white hover:to-purple-300 text-black",onClick:s,children:(0,g.jsx)("span",{children:"Airdrop 1 "})})]})})},x={i8:"0.2.0"},y=a(7048),v={en:{heroTitle:"Behavioral incentive rails for every relationship",heroSubtitle:"Design 21-day habits, staged targets and surprise transfers with automatic verification on Solana.",heroCta:"Launch a mission",heroSecondary:"Understand the design memo",highlightHeading:"Why communities choose GlueX",highlights:[{title:"Multi-role trust rooms",description:"Capture parent–child, partners, DAO squads or workplace rituals inside one programmable space."},{title:"Proof-first automation",description:"Schedule checkpoints, upload evidence, and let the program release deposits only when agreements hold."},{title:"Transparent locked vaults",description:"Incentives stay inside PDAs, so every contributor sees how much value is reserved, released or clawed back."}],diagramHeading:"How incentives circulate",diagrams:[{title:"Value loop",description:"Issuers lock incentives → takers prove progress → verifiers release payouts back to the vault.",url:"https://mermaid.ink/img/eyJjb2RlIjogImdyYXBoIExSO0lzc3Vlci0tPkdvYWxWYXVsdDtHb2FsVmF1bHQtLT5UYWtlcjtUYWtlci0tPlByb29mO1Byb29mLS0-VmVyaWZpZXI7VmVyaWZpZXItLT5Hb2FsVmF1bHQiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGFyayJ9fQ"},{title:"Spaces & rituals",description:"Role spaces orchestrate habits, staged targets and surprise moments inside the same automation engine.",url:"https://mermaid.ink/img/eyJjb2RlIjogImdyYXBoIFREO1VzZXItLT5Sb2xlU3BhY2U7Um9sZVNwYWNlLS0-SGFiaXQ7Um9sZVNwYWNlLS0-VGFyZ2V0cztSb2xlU3BhY2UtLT5TdXJwcmlzZTtIYWJpdC0tPlZlcmlmaWVyO1RhcmdldHMtLT5WZXJpZmllcjtTdXJwcmlzZS0tPlZhdWx0IiwgIm1lcm1haWQiOiB7InRoZW1lIjogImZvcmVzdCJ9fQ"}],inspirationHeading:"Vision & mechanism",inspirationBody:"GlueX emphasises negotiation, shared responsibility, and transparent incentives. Participants co-create milestones, lock deposits, and reclaim unused value when goals are completed or forfeited.",galleryHeading:"Product snapshots",galleryCaptions:["Goal orchestration","Collective habit board","Automated payout console"],ctaTitle:"Ready to co-create incentives?",ctaSubtitle:"Jump into the Goals workspace to craft a multi-stage ritual for your team or family.",ctaButton:"Open Goals workspace"},zh:{heroTitle:"GlueX：面向多角色关系的行为激励轨道",heroSubtitle:"21 天习惯、阶段性目标与惊喜时刻都可自动验证、自动结算，保障双方协商结果。",heroCta:"立即创建激励计划",heroSecondary:"查看设计思路",highlightHeading:"为什么选择 GlueX",highlights:[{title:"多角色信任空间",description:"亲子、情侣、团队或 DAO 小组都能在同一个自动化空间内定义目标与激励。"},{title:"证据优先的自动化",description:"设置检查节点、上传完成证明，程序按照规则发放或终止后续奖励。"},{title:"透明的托管金库",description:"激励金托管在 PDA 中，所有参与者都能看到剩余金额、已释放金额与解锁时间。"}],diagramHeading:"价值如何流转",diagrams:[{title:"价值闭环",description:"发起人锁定激励 → 执行者提交证明 → 验证者审核并释放，所有动作可审计。",url:"https://mermaid.ink/img/eyJjb2RlIjogImdyYXBoIExSO0lzc3Vlci0tPkdvYWxWYXVsdDtHb2FsVmF1bHQtLT5UYWtlcjtUYWtlci0tPlByb29mO1Byb29mLS0-VmVyaWZpZXI7VmVyaWZpZXItLT5Hb2FsVmF1bHQiLCAibWVybWFpZCI6IHsidGhlbWUiOiAiZGFyayJ9fQ"},{title:"场景与仪式",description:"不同角色空间可以同时运行习惯打卡、阶段目标与惊喜时刻，统一通过合约调度。",url:"https://mermaid.ink/img/eyJjb2RlIjogImdyYXBoIFREO1VzZXItLT5Sb2xlU3BhY2U7Um9sZVNwYWNlLS0-SGFiaXQ7Um9sZVNwYWNlLS0-VGFyZ2V0cztSb2xlU3BhY2UtLT5TdXJwcmlzZTtIYWJpdC0tPlZlcmlmaWVyO1RhcmdldHMtLT5WZXJpZmllcjtTdXJwcmlzZS0tPlZhdWx0IiwgIm1lcm1haWQiOiB7InRoZW1lIjogImZvcmVzdCJ9fQ"}],inspirationHeading:"愿景与机制",inspirationBody:"GlueX 鼓励双方先协商再自动执行：共同定义阶段、锁定押金、按验证结果释放或回收剩余价值，从源头减少纠纷。",galleryHeading:"产品快照",galleryCaptions:["目标编排","习惯驱动看板","自动结算面板"],ctaTitle:"立即开启共创激励之旅",ctaSubtitle:"前往 Goals 工作台，几分钟内搭建一套可验证、可结算的激励体验。",ctaButton:"进入 Goals 工作台"}},j=function(){var e=(0,i.O)(),t=(0,o.R)().connection,a=v[(0,y.Z)().language],s=b(function(e){return e.balance}),l=b().getUserSOLBalance;(0,n.useEffect)(function(){e.publicKey&&l(e.publicKey,t)},[e.publicKey,t,l]);var c=[{src:"https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?auto=format&fit=crop&w=800&q=80",caption:a.galleryCaptions[0]},{src:"https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?auto=format&fit=crop&w=800&q=80",caption:a.galleryCaptions[1]},{src:"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=800&q=80",caption:a.galleryCaptions[2]}];return(0,g.jsxs)("div",{className:"mx-auto max-w-6xl px-4 py-10 space-y-12",children:[(0,g.jsxs)("section",{className:"grid gap-8 md:grid-cols-2 items-center",children:[(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"text-sm text-slate-500",children:["v",x.i8]}),(0,g.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-br from-indigo-500 to-fuchsia-500",children:a.heroTitle}),(0,g.jsx)("p",{className:"text-lg text-slate-300 leading-relaxed",children:a.heroSubtitle}),(0,g.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,g.jsx)(r(),{href:"/goals",className:"btn btn-primary",children:a.heroCta}),(0,g.jsx)(r(),{href:"https://github.com/ai-chen2050/gluex",target:"_blank",className:"btn btn-outline",children:a.heroSecondary})]})]}),(0,g.jsxs)("div",{className:"rounded-3xl border border-base-300 bg-base-200/60 p-6 shadow-lg space-y-4",children:[(0,g.jsx)(f,{}),(0,g.jsxs)("div",{className:"text-3xl font-semibold text-center",children:[e.publicKey?(s||0).toLocaleString():"—",(0,g.jsx)("span",{className:"text-base text-slate-500 ml-2",children:"SOL"})]}),(0,g.jsx)("p",{className:"text-center text-sm text-slate-400",children:e.publicKey?e.publicKey.toBase58():"Connect a wallet to preview live balances."}),(0,g.jsxs)("div",{className:"mockup-code bg-base-300 text-left",children:[(0,g.jsx)("pre",{"data-prefix":">",children:(0,g.jsx)("code",{children:"gluex launch --habit 21d --proof auto"})}),(0,g.jsx)("pre",{"data-prefix":">",className:"text-warning",children:(0,g.jsx)("code",{children:"await vault.release()"})}),(0,g.jsx)("pre",{"data-prefix":">",className:"text-success",children:(0,g.jsx)("code",{children:"# incentives routed ✔"})})]})]})]}),(0,g.jsxs)("section",{className:"space-y-6",children:[(0,g.jsx)("h2",{className:"text-2xl font-semibold",children:a.highlightHeading}),(0,g.jsx)("div",{className:"grid gap-6 md:grid-cols-3",children:a.highlights.map(function(e){return(0,g.jsxs)("div",{className:"rounded-2xl border border-base-300 bg-base-200/60 p-5 space-y-3",children:[(0,g.jsx)("h3",{className:"text-xl font-semibold",children:e.title}),(0,g.jsx)("p",{className:"text-sm text-slate-400",children:e.description})]},e.title)})})]}),(0,g.jsxs)("section",{className:"space-y-6",children:[(0,g.jsx)("h2",{className:"text-2xl font-semibold",children:a.diagramHeading}),(0,g.jsx)("div",{className:"grid gap-6 md:grid-cols-2",children:a.diagrams.map(function(e){return(0,g.jsxs)("div",{className:"rounded-3xl border border-base-300 bg-base-200/50 p-5 space-y-3",children:[(0,g.jsx)("img",{src:e.url,alt:e.title,className:"w-full rounded-2xl bg-base-100"}),(0,g.jsx)("h3",{className:"text-lg font-semibold",children:e.title}),(0,g.jsx)("p",{className:"text-sm text-slate-400",children:e.description})]},e.title)})})]}),(0,g.jsxs)("section",{className:"space-y-4",children:[(0,g.jsx)("h2",{className:"text-2xl font-semibold",children:a.inspirationHeading}),(0,g.jsx)("p",{className:"text-slate-300 leading-relaxed",children:a.inspirationBody})]}),(0,g.jsxs)("section",{className:"space-y-4",children:[(0,g.jsx)("h2",{className:"text-2xl font-semibold",children:a.galleryHeading}),(0,g.jsx)("div",{className:"grid gap-4 md:grid-cols-3",children:c.map(function(e){return(0,g.jsxs)("figure",{className:"rounded-2xl overflow-hidden border border-base-300",children:[(0,g.jsx)("img",{src:e.src,alt:e.caption,className:"w-full h-48 object-cover"}),(0,g.jsx)("figcaption",{className:"p-3 text-sm text-slate-400",children:e.caption})]},e.caption)})})]}),(0,g.jsxs)("section",{className:"rounded-3xl border border-fuchsia-500/30 bg-gradient-to-br from-indigo-900/40 to-fuchsia-900/20 p-8 text-center space-y-4",children:[(0,g.jsx)("h3",{className:"text-3xl font-semibold",children:a.ctaTitle}),(0,g.jsx)("p",{className:"text-slate-300",children:a.ctaSubtitle}),(0,g.jsx)(r(),{href:"/goals",className:"btn btn-secondary",children:a.ctaButton})]})]})},N=a(5866),k=a(7191),S=a.n(k),w=function(){var e=(0,i.O)(),t=e.publicKey,a=e.signMessage,s=(0,n.useCallback)((0,c.Z)(d().mark(function e(){var n,s;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw Error("Wallet not connected!");case 3:if(a){e.next=5;break}throw Error("Wallet does not support message signing!");case 5:return n=new TextEncoder().encode("Hello, world!"),e.next=8,a(n);case 8:if(s=e.sent,(0,N.T)(s,n,t.toBytes())){e.next=11;break}throw Error("Invalid signature!");case 11:(0,p.h)({type:"success",message:"Sign message successful!",txid:S().encode(s)}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),(0,p.h)({type:"error",message:"Sign Message failed!",description:null===e.t0||void 0===e.t0?void 0:e.t0.message}),console.log("error","Sign Message failed! ".concat(null===e.t0||void 0===e.t0?void 0:e.t0.message));case 18:case"end":return e.stop()}},e,null,[[0,14]])})),[t,p.h,a]);return(0,g.jsx)("div",{className:"flex flex-row justify-center",children:(0,g.jsxs)("div",{className:"relative group items-center",children:[(0,g.jsx)("div",{className:"m-1 absolute -inset-0.5 bg-gradient-to-r from-indigo-500 to-fuchsia-500  rounded-lg blur opacity-20 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-tilt"}),(0,g.jsxs)("button",{className:"group w-60 m-2 btn animate-pulse bg-gradient-to-br from-indigo-500 to-fuchsia-500 hover:from-white hover:to-purple-300 text-black",onClick:s,disabled:!t,children:[(0,g.jsx)("div",{className:"hidden group-disabled:block",children:"Wallet not connected"}),(0,g.jsx)("span",{className:"block group-disabled:hidden",children:"Sign Message"})]})]})})};function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var T=function(){var e=(0,o.R)().connection,t=(0,i.O)(),a=t.publicKey,s=t.sendTransaction,r=(0,n.useCallback)((0,c.Z)(d().mark(function t(){var n,r,i,o,c;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=4;break}return(0,p.h)({type:"error",message:"Wallet not connected!"}),console.log("error","Send Transaction: Wallet not connected!"),t.abrupt("return");case 4:return n="",t.prev=5,r=[m.SystemProgram.transfer({fromPubkey:a,toPubkey:m.Keypair.generate().publicKey,lamports:1e6})],t.next=9,e.getLatestBlockhash();case 9:return i=t.sent,o=new m.TransactionMessage({payerKey:a,recentBlockhash:i.blockhash,instructions:r}).compileToLegacyMessage(),c=new m.VersionedTransaction(o),t.next=14,s(c,e);case 14:return n=t.sent,t.next=17,e.confirmTransaction(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach(function(t){(0,l.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({signature:n},i),"confirmed");case 17:console.log(n),(0,p.h)({type:"success",message:"Transaction successful!",txid:n}),t.next=26;break;case 21:return t.prev=21,t.t0=t.catch(5),(0,p.h)({type:"error",message:"Transaction failed!",description:null===t.t0||void 0===t.t0?void 0:t.t0.message,txid:n}),console.log("error","Transaction failed! ".concat(null===t.t0||void 0===t.t0?void 0:t.t0.message),n),t.abrupt("return");case 26:case"end":return t.stop()}},t,null,[[5,21]])})),[a,p.h,e,s]);return(0,g.jsx)("div",{className:"flex flex-row justify-center",children:(0,g.jsxs)("div",{className:"relative group items-center",children:[(0,g.jsx)("div",{className:"m-1 absolute -inset-0.5 bg-gradient-to-r from-indigo-500 to-fuchsia-500  rounded-lg blur opacity-20 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-tilt"}),(0,g.jsxs)("button",{className:"group w-60 m-2 btn animate-pulse bg-gradient-to-br from-indigo-500 to-fuchsia-500 hover:from-white hover:to-purple-300 text-black",onClick:r,disabled:!a,children:[(0,g.jsx)("div",{className:"hidden group-disabled:block ",children:"Wallet not connected"}),(0,g.jsx)("span",{className:"block group-disabled:hidden",children:"Send Transaction"})]})]})})};function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var L=function(){var e=(0,o.R)().connection,t=(0,i.O)(),a=t.publicKey,s=t.sendTransaction,r=(0,n.useCallback)((0,c.Z)(d().mark(function t(){var n,r,i,o,c;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=4;break}return(0,p.h)({type:"error",message:"Wallet not connected!"}),console.log("error","Send Transaction: Wallet not connected!"),t.abrupt("return");case 4:return n="",t.prev=5,r=[m.SystemProgram.transfer({fromPubkey:a,toPubkey:m.Keypair.generate().publicKey,lamports:1e6})],t.next=9,e.getLatestBlockhash();case 9:return i=t.sent,o=new m.TransactionMessage({payerKey:a,recentBlockhash:i.blockhash,instructions:r}).compileToV0Message(),c=new m.VersionedTransaction(o),t.next=14,s(c,e);case 14:return n=t.sent,t.next=17,e.confirmTransaction(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach(function(t){(0,l.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({signature:n},i),"confirmed");case 17:console.log(n),(0,p.h)({type:"success",message:"Transaction successful!",txid:n}),t.next=26;break;case 21:return t.prev=21,t.t0=t.catch(5),(0,p.h)({type:"error",message:"Transaction failed!",description:null===t.t0||void 0===t.t0?void 0:t.t0.message,txid:n}),console.log("error","Transaction failed! ".concat(null===t.t0||void 0===t.t0?void 0:t.t0.message),n),t.abrupt("return");case 26:case"end":return t.stop()}},t,null,[[5,21]])})),[a,p.h,e,s]);return(0,g.jsx)("div",{className:"flex flex-row justify-center",children:(0,g.jsxs)("div",{className:"relative group items-center",children:[(0,g.jsx)("div",{className:"m-1 absolute -inset-0.5 bg-gradient-to-r from-indigo-500 to-fuchsia-500  rounded-lg blur opacity-20 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-tilt"}),(0,g.jsxs)("button",{className:"group w-60 m-2 btn animate-pulse bg-gradient-to-br from-indigo-500 to-fuchsia-500 hover:from-white hover:to-purple-300 text-black",onClick:r,disabled:!a,children:[(0,g.jsx)("div",{className:"hidden group-disabled:block ",children:"Wallet not connected"}),(0,g.jsx)("span",{className:"block group-disabled:hidden",children:"Send Versioned Transaction"})]})]})})},C={en:{title:"Tools",description:"A handy toolbox for experimenting with message signing and Solana transaction flows. Validate wallet connectivity before launching incentive missions.",quickActions:"Quick actions",playgroundTitle:"Wallet playground",playgroundCopy:"Use these widgets to sign raw messages, send legacy or versioned transactions, and rehearse proof submissions.",recipesTitle:"Blueprints & recipes",recipeCards:[{title:"Habit checkpoint rehearsal",desc:"Simulate 21-day habit submissions by signing a note and sending a mock transaction hash."},{title:"Target milestone payout",desc:"Dry-run the SOL transfer for a staged milestone before you automate it on-chain."},{title:"Surprise drop trigger",desc:"Ensure your vault has enough lamports and that your wallet can fire the final release call."}],guideTitle:"3-minute confidence checklist",steps:["Connect burner wallet or Phantom/Backpack.","Request devnet SOL and ensure ≥ 0.5 SOL balance.","Sign a message to verify the address matches your agreement.","Send a small legacy or versioned transaction to test RPC compatibility.","Copy the resulting signature as proof inside your GlueX goal."]},zh:{title:"工具箱",description:"用于测试消息签名与多种 Solana 交易流程的实用工具。先在此验证钱包连通性，再上线你的激励旅程。",quickActions:"快捷操作",playgroundTitle:"钱包操练场",playgroundCopy:"通过这些组件完成消息签名、传统交易与版本化交易演练，为提交证明或触发激励做彩排。",recipesTitle:"操作蓝图",recipeCards:[{title:"习惯打卡演练",desc:"先签一条说明、再发送一笔小额交易，模拟 21 天习惯的完成证明。"},{title:"阶段目标发放",desc:"上线前先用测试资金跑一遍 SOL 转账流程，确认节点网络无误。"},{title:"惊喜发放触发",desc:"检查金库余额与钱包权限，确保可以顺利触发最终的解锁指令。"}],guideTitle:"3 分钟信心清单",steps:["连接测试钱包或主力钱包（Phantom / Backpack）。","申请一笔 devnet SOL，余额保持在 0.5 SOL 以上。","签名一条提示消息，确认对方能验证你的地址。","发送一笔传统或版本化交易，检查 RPC 连接与限速。","复制交易哈希，作为 GlueX 目标中的证明材料。"]}},A=function(){var e=C[(0,y.Z)().language];return(0,g.jsxs)("div",{className:"mx-auto max-w-6xl px-4 py-10 space-y-10",children:[(0,g.jsxs)("section",{className:"space-y-4 text-center",children:[(0,g.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-br from-indigo-500 to-fuchsia-500",children:e.title}),(0,g.jsx)("p",{className:"text-slate-300 max-w-3xl mx-auto",children:e.description})]}),(0,g.jsxs)("section",{className:"grid md:grid-cols-2 gap-6 items-start",children:[(0,g.jsxs)("div",{className:"rounded-3xl border border-base-300 bg-base-200/70 p-6 space-y-4 shadow-lg",children:[(0,g.jsx)("p",{className:"text-sm uppercase tracking-wide text-fuchsia-400",children:e.quickActions}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("div",{className:"rounded-2xl border border-base-300 bg-base-100/40 p-4",children:(0,g.jsx)(w,{})}),(0,g.jsx)("div",{className:"rounded-2xl border border-base-300 bg-base-100/40 p-4",children:(0,g.jsx)(T,{})}),(0,g.jsx)("div",{className:"rounded-2xl border border-base-300 bg-base-100/40 p-4",children:(0,g.jsx)(L,{})})]})]}),(0,g.jsxs)("div",{className:"rounded-3xl border border-indigo-500/30 bg-gradient-to-br from-indigo-900/30 to-fuchsia-900/10 p-6 space-y-4 shadow-lg",children:[(0,g.jsx)("h2",{className:"text-2xl font-semibold",children:e.playgroundTitle}),(0,g.jsx)("p",{className:"text-slate-300",children:e.playgroundCopy}),(0,g.jsx)("div",{className:"grid gap-4",children:e.recipeCards.map(function(e){return(0,g.jsxs)("div",{className:"rounded-2xl bg-base-100/40 border border-base-300 p-4",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold",children:e.title}),(0,g.jsx)("p",{className:"text-sm text-slate-400",children:e.desc})]},e.title)})})]})]}),(0,g.jsxs)("section",{className:"rounded-3xl border border-base-300 bg-base-200/60 p-6 space-y-4 shadow-lg",children:[(0,g.jsx)("h2",{className:"text-2xl font-semibold",children:e.guideTitle}),(0,g.jsx)("ol",{className:"list-decimal list-inside space-y-2 text-slate-300",children:e.steps.map(function(e,t){return(0,g.jsx)("li",{children:e},t)})})]})]})},I=a(6835),B=a(7812),Z=a(9828),R=JSON.parse('{"version":"0.1.0","name":"gluex","instructions":[{"name":"setupGoal","accounts":[{"name":"goals","isMut":true,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"taker","type":"publicKey"},{"name":"description","type":"string"},{"name":"room","type":{"defined":"Roomspace"}},{"name":"relations","type":{"defined":"Relations"}},{"name":"eventype","type":{"defined":"EventType"}},{"name":"subGoals","type":{"vec":{"defined":"SubGoalInput"}}},{"name":"totalIncentiveAmount","type":"u64"},{"name":"completionTime","type":"i64"},{"name":"lockedAmount","type":"u64"},{"name":"unlockTime","type":"i64"},{"name":"config","type":{"defined":"GoalConfigInput"}}]},{"name":"submitProof","accounts":[{"name":"goals","isMut":true,"isSigner":false},{"name":"taker","isMut":false,"isSigner":true}],"args":[{"name":"subgoalIndex","type":"u8"},{"name":"proofUri","type":"string"}]},{"name":"reviewSubgoal","accounts":[{"name":"goals","isMut":true,"isSigner":false},{"name":"issuer","isMut":false,"isSigner":true},{"name":"takerAccount","isMut":true,"isSigner":false}],"args":[{"name":"subgoalIndex","type":"u8"},{"name":"approve","type":"bool"}]},{"name":"triggerSurprise","accounts":[{"name":"goals","isMut":true,"isSigner":false},{"name":"takerAccount","isMut":true,"isSigner":false}],"args":[]},{"name":"claimUnused","accounts":[{"name":"goals","isMut":true,"isSigner":false},{"name":"issuer","isMut":true,"isSigner":true}],"args":[]}],"accounts":[{"name":"totalGoal","type":{"kind":"struct","fields":[{"name":"issuer","type":"publicKey"},{"name":"taker","type":"publicKey"},{"name":"description","type":"string"},{"name":"room","type":{"defined":"Roomspace"}},{"name":"relations","type":{"defined":"Relations"}},{"name":"eventype","type":{"defined":"EventType"}},{"name":"subGoals","type":{"array":[{"defined":"SubGoal"},5]}},{"name":"activeSubGoals","type":"u8"},{"name":"totalIncentiveAmount","type":"u64"},{"name":"depositedAmount","type":"u64"},{"name":"releasedAmount","type":"u64"},{"name":"completionTime","type":"i64"},{"name":"lockedAmount","type":"u64"},{"name":"unlockTime","type":"i64"},{"name":"startTime","type":"i64"},{"name":"surpriseTriggerTs","type":"i64"},{"name":"checkpointInterval","type":"i64"},{"name":"completedCount","type":"u8"},{"name":"failed","type":"bool"},{"name":"bump","type":"u8"}]}}],"types":[{"name":"Roomspace","type":{"kind":"enum","variants":[{"name":"LoveGame"},{"name":"GroupGame"}]}},{"name":"Relations","type":{"kind":"enum","variants":[{"name":"Parents"},{"name":"Lover"},{"name":"Bosstaff"},{"name":"Partner"},{"name":"Dao"}]}},{"name":"EventType","type":{"kind":"enum","variants":[{"name":"HabitTraning"},{"name":"TargetAchieve"},{"name":"SurpriseTime"}]}},{"name":"SubGoalStatus","type":{"kind":"enum","variants":[{"name":"Pending"},{"name":"ProofSubmitted"},{"name":"Approved"},{"name":"Rejected"},{"name":"Paid"}]}},{"name":"SubGoal","type":{"kind":"struct","fields":[{"name":"title","type":{"array":["u8",48]}},{"name":"deadline","type":"i64"},{"name":"incentiveAmount","type":"u64"},{"name":"status","type":{"defined":"SubGoalStatus"}},{"name":"proofUri","type":{"array":["u8",128]}},{"name":"submittedAt","type":"i64"},{"name":"verifier","type":"publicKey"},{"name":"autoReleaseAt","type":"i64"},{"name":"isActive","type":"bool"}]}},{"name":"SubGoalInput","type":{"kind":"struct","fields":[{"name":"title","type":"string"},{"name":"deadline","type":"i64"},{"name":"incentiveAmount","type":"u64"},{"name":"autoReleaseAt","type":"i64"}]}},{"name":"GoalConfigInput","type":{"kind":"struct","fields":[{"name":"startTime","type":"i64"},{"name":"surpriseTime","type":"i64"},{"name":"checkpointInterval","type":"i64"}]}}],"errors":[{"code":6000,"name":"None","msg":""},{"code":6001,"name":"DescExceedMaxChars","msg":"Description exceeds the maximum character limit"},{"code":6002,"name":"RelationsNotSupport","msg":"Relations type is not supported"},{"code":6003,"name":"RoomNotSupport","msg":"Room type is not supported"},{"code":6004,"name":"EventTypeNotSupport","msg":"EventType type is not supported"},{"code":6005,"name":"SubGoalNumExceed","msg":"SubGoal number too many,maximum is five target"},{"code":6006,"name":"PayerAccountInsufficient","msg":"Payer account amount insufficient,account amount must bigger than total_incentive_amount"},{"code":6007,"name":"LockedAmountInvalid","msg":"Locked amount must smaller than total_incentive_amount"},{"code":6008,"name":"SumOfSubgoalAmountInvalid","msg":"The sum of subgoal amount must smaller than total_incentive_amount"},{"code":6009,"name":"UnLockedTimeInvalid","msg":"UnLocked time must bigger than completion time"},{"code":6010,"name":"SubGoalIndexOutOfBounds","msg":"Subgoal index out of bounds"},{"code":6011,"name":"SubGoalAlreadyFinalized","msg":"Subgoal already finalized"},{"code":6012,"name":"ProofAlreadySubmitted","msg":"Proof already submitted for this subgoal"},{"code":6013,"name":"ProofMissing","msg":"Proof submission required before verification"},{"code":6014,"name":"UnauthorizedSigner","msg":"Only issuer can execute this action"},{"code":6015,"name":"UnauthorizedTaker","msg":"Only taker can execute this action"},{"code":6016,"name":"SurpriseTimeNotReached","msg":"Surprise trigger time not reached"},{"code":6017,"name":"UnlockTimeNotReached","msg":"Unlock time not reached"},{"code":6018,"name":"NoFundsAvailable","msg":"No funds available to claim"},{"code":6019,"name":"MissingSubGoals","msg":"Missing subgoals for this event type"},{"code":6020,"name":"HabitConfigInvalid","msg":"Habit configuration is invalid"},{"code":6021,"name":"InvalidCheckpointInterval","msg":"Checkpoint interval must be positive"},{"code":6022,"name":"ParsePubkeyError","msg":"Parse public key error"},{"code":6023,"name":"InvalidSubgoalFormat","msg":"Invalid subgoal format"}],"metadata":{"address":"DzZByscRszKLgwFTVM6BMtbG8aBYXfWTbSU7sa9gj5a8"}}'),G=new m.PublicKey(R.metadata.address),W=function(){var e=(0,i.O)(),t=(0,o.R)().connection;return(0,n.useMemo)(function(){if(!e.publicKey||!e.signTransaction||!e.signAllTransactions)return null;var a=new Z.Y7(t,e,Z.Y7.defaultOptions());return new Z.$r(R,G,a)},[t,e])},K=a(143),M=function(e){return Math.round((e||0)*m.LAMPORTS_PER_SOL)},F=function(e){return(e||0)/m.LAMPORTS_PER_SOL},U=function(e){if("number"==typeof e)return Math.floor(e);if(!e)return 0;var t=Date.parse(e);return Number.isNaN(t)?0:Math.floor(t/1e3)},V=new TextDecoder,D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return"";for(var t=new Uint8Array(e),a=t.length,n=0;n<t.length;n+=1)if(0===t[n]){a=n;break}return V.decode(t.slice(0,a))},H=a(8764).Buffer;function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach(function(t){(0,l.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var X=[{key:"loveGame",value:{loveGame:{}},labels:{en:"Love game",zh:"恋爱空间"}},{key:"groupGame",value:{groupGame:{}},labels:{en:"Group game",zh:"团队空间"}}],J=[{key:"parents",value:{parents:{}},labels:{en:"Parents",zh:"亲子"}},{key:"lover",value:{lover:{}},labels:{en:"Lover",zh:"恋人"}},{key:"bosstaff",value:{bosstaff:{}},labels:{en:"Boss & Staff",zh:"上下级"}},{key:"partner",value:{partner:{}},labels:{en:"Partner / Friends",zh:"伙伴 / 朋友"}},{key:"dao",value:{dao:{}},labels:{en:"DAO / Public",zh:"DAO / 公域"}}],Y=[{key:"habitTraning",value:{habitTraning:{}},labels:{en:"21-day Habit",zh:"21 天习惯"}},{key:"targetAchieve",value:{targetAchieve:{}},labels:{en:"Staged Goal",zh:"阶段目标"}},{key:"surpriseTime",value:{surpriseTime:{}},labels:{en:"Surprise Moment",zh:"惊喜时刻"}}],_={pending:"badge-info",proofSubmitted:"badge-warning",approved:"badge-success",rejected:"badge-error",paid:"badge-success"},q={title:"",deadline:"",amount:0},Q={en:{formTitle:"Design a new GlueX mission",takerLabel:"Taker public key",takerPlaceholder:"Destination wallet",descriptionLabel:"Description",descriptionPlaceholder:"Outline the shared mission",relationLabel:"Relationship",roomLabel:"Space",eventLabel:"Event type",totalLabel:"Total incentive (SOL)",lockedLabel:"Locked deposit (SOL)",checkpointLabel:"Checkpoint interval (days)",surpriseLabel:"Surprise trigger date",startLabel:"Start time",completionLabel:"Completion target",unlockLabel:"Unlock time",stageSectionTitle:"Stages & checkpoints",stageLabel:"Stage",removeStage:"Remove",stageTitlePlaceholder:"Short title",stageAmountPlaceholder:"Incentive (SOL)",habitHint:"We will generate three weekly checkpoints with exponential incentives.",surpriseHint:"Surprise events release the full incentive at the trigger time.",addStage:"Add another stage",launch:"Launch mission",listTitle:"Active spaces",refresh:"Refresh",emptyBanner:"Connect your wallet or create a mission to see it here.",info:{room:"Room",relation:"Relation",completion:"Completion target",unlock:"Unlock time",issuer:"Issuer"},incentive:"Incentive",deadline:"Deadline",proofPlaceholder:"Proof link or note",submitProof:"Submit proof",approve:"Approve & release",reject:"Reject",triggerSurprise:"Trigger surprise payout",claimUnused:"Claim unused balance",statusLabels:{pending:"Pending",proofSubmitted:"Proof submitted",approved:"Approved",rejected:"Rejected",paid:"Paid"},notifications:{loadFailed:"Failed to load goals",connectWallet:"Connect your wallet to create goals",invalidTaker:"Invalid taker public key",createSuccess:"Goal created",createFailed:"Goal creation failed",proofMissingLink:"Add a proof link first",proofSubmitted:"Proof submitted",proofFailed:"Proof submission failed",reviewSuccess:"Incentive released",reviewReject:"Submission rejected",reviewFailed:"Review failed",surpriseSuccess:"Surprise triggered",surpriseFailed:"Trigger failed",claimSuccess:"Unused SOL claimed",claimFailed:"Claim failed"}},zh:{formTitle:"创建新的 GlueX 激励任务",takerLabel:"执行者公钥",takerPlaceholder:"请输入对方钱包地址",descriptionLabel:"任务描述",descriptionPlaceholder:"写下约定的目标或仪式",relationLabel:"关系类型",roomLabel:"场景空间",eventLabel:"事件类型",totalLabel:"总激励（SOL）",lockedLabel:"押金（SOL）",checkpointLabel:"检查间隔（天）",surpriseLabel:"惊喜触发时间",startLabel:"开始时间",completionLabel:"完成节点",unlockLabel:"解锁时间",stageSectionTitle:"阶段与检查点",stageLabel:"阶段",removeStage:"移除",stageTitlePlaceholder:"阶段标题",stageAmountPlaceholder:"激励金额（SOL）",habitHint:"系统会自动生成 3 个逐周增长的检查节点。",surpriseHint:"惊喜事件会在指定时间一次性释放全部激励。",addStage:"新增阶段",launch:"发布任务",listTitle:"当前激励空间",refresh:"刷新",emptyBanner:"连接钱包或创建任务后即可查看列表。",info:{room:"空间",relation:"关系",completion:"目标截止",unlock:"解锁时间",issuer:"发起人"},incentive:"激励",deadline:"截止时间",proofPlaceholder:"上传证明链接或备注",submitProof:"提交证明",approve:"审核并释放",reject:"驳回",triggerSurprise:"触发惊喜发放",claimUnused:"收回剩余押金",statusLabels:{pending:"待提交",proofSubmitted:"待审核",approved:"已通过",rejected:"已驳回",paid:"已发放"},notifications:{loadFailed:"加载目标失败",connectWallet:"请先连接钱包再创建任务",invalidTaker:"执行者公钥无效",createSuccess:"任务已创建",createFailed:"创建任务失败",proofMissingLink:"请先填写证明链接",proofSubmitted:"证明已提交",proofFailed:"提交证明失败",reviewSuccess:"激励已释放",reviewReject:"提交已驳回",reviewFailed:"审核失败",surpriseSuccess:"惊喜发放成功",surpriseFailed:"触发失败",claimSuccess:"剩余押金已收回",claimFailed:"收回失败"}}},$=function(e){return e?Object.keys(e)[0]:"Unknown"},ee=function(e){var t=Z.BN.isBN(e)?e.toNumber():e;return t?new Date(1e3*t).toLocaleString():"—"},et=function(){var e,t,a,s,r,o=(0,i.O)(),u=W(),p=(0,K.Z)().set,b=(0,y.Z)().language,h=Q[b],f=(0,n.useMemo)(function(){return X.map(function(e){return z(z({},e),{},{label:e.labels[b]})})},[b]),x=(0,n.useMemo)(function(){return J.map(function(e){return z(z({},e),{},{label:e.labels[b]})})},[b]),v=(0,n.useMemo)(function(){return Y.map(function(e){return z(z({},e),{},{label:e.labels[b]})})},[b]),j=(0,n.useState)(""),N=j[0],k=j[1],S=(0,n.useState)(""),w=S[0],O=S[1],T=(0,n.useState)(X[0].value),P=T[0],L=T[1],C=(0,n.useState)(J[3].value),A=C[0],R=C[1],G=(0,n.useState)(Y[1].value),V=G[0],E=G[1],et=(0,n.useState)(1),ea=et[0],en=et[1],es=(0,n.useState)(.1),er=es[0],ei=es[1],eo=(0,n.useState)(""),el=eo[0],ec=eo[1],eu=(0,n.useState)(""),ed=eu[0],em=eu[1],ep=(0,n.useState)(""),eb=ep[0],eg=ep[1],eh=(0,n.useState)(""),ef=eh[0],ex=eh[1],ey=(0,n.useState)(7),ev=ey[0],ej=ey[1],eN=(0,n.useState)([z({},q)]),ek=eN[0],eS=eN[1],ew=(0,n.useState)({}),eO=ew[0],eT=ew[1],eP=(0,n.useState)(!1),eL=eP[0],eC=eP[1],eA=(0,n.useState)([]),eI=eA[0],eB=eA[1],eZ=(0,n.useMemo)(function(){return!!V.habitTraning},[V]),eR=(0,n.useMemo)(function(){return!!V.targetAchieve},[V]),eG=(0,n.useMemo)(function(){return!!V.surpriseTime},[V]),eW=(0,n.useCallback)(function(e,t,a){p(function(n){n.notifications=[].concat((0,B.Z)(n.notifications),[{type:e,message:t,description:a}])})},[p]),eK=(0,n.useCallback)((0,c.Z)(d().mark(function e(){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!u||!o.publicKey)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,u.account.totalGoal.all();case 5:eB(e.sent.filter(function(e){return e.account.issuer.equals(o.publicKey)||e.account.taker.equals(o.publicKey)})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),eW("error",h.notifications.loadFailed,e.t0.message);case 13:case"end":return e.stop()}},e,null,[[2,9]])})),[u,o.publicKey,eW,h.notifications.loadFailed]);(0,n.useEffect)(function(){eK()},[eK]);var eM=function(e,t,a){eS(function(n){return n.map(function(n,s){return s===e?z(z({},n),{},(0,l.Z)({},t,"amount"===t?Number(a):a)):n})})},eF=(e=(0,c.Z)(d().mark(function e(){var t,a,n,s,r,i,l;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!u||!o.publicKey)){e.next=3;break}return eW("warning",h.notifications.connectWallet),e.abrupt("return");case 3:e.prev=3,t=new m.PublicKey(N),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(3),eW("error",h.notifications.invalidTaker,e.t0.message),e.abrupt("return");case 11:return eC(!0),e.prev=12,a=m.PublicKey.findProgramAddressSync([H.from("gluex-goals"),o.publicKey.toBuffer(),t.toBuffer()],u.programId),n=(0,I.Z)(a,1)[0],s=M(ea),r=M(er),i=new Z.BN(U(ed)),l=new Z.BN(U(eb)),e.next=20,u.methods.setupGoal(t,w,P,A,V,eR?ek.filter(function(e){return e.title.trim().length>0}).slice(0,5).map(function(e){return{title:e.title,deadline:new Z.BN(U(e.deadline)),incentiveAmount:new Z.BN(M(e.amount)),autoReleaseAt:new Z.BN(0)}}):[],new Z.BN(s),i,new Z.BN(r),l,{startTime:new Z.BN(U(el)),surpriseTime:new Z.BN(eG?U(ef):0),checkpointInterval:new Z.BN(eZ?86400*ev:0)}).accounts({goals:n,payer:o.publicKey,systemProgram:m.SystemProgram.programId}).rpc();case 20:eW("success",h.notifications.createSuccess),eK(),e.next=28;break;case 24:e.prev=24,e.t1=e.catch(12),console.error(e.t1),eW("error",h.notifications.createFailed,e.t1.message);case 28:return e.prev=28,eC(!1),e.finish(28);case 31:case"end":return e.stop()}},e,null,[[3,7],[12,24,28,31]])})),function(){return e.apply(this,arguments)}),eU=(t=(0,c.Z)(d().mark(function e(t,a){var n;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!u||!o.publicKey)){e.next=2;break}return e.abrupt("return");case 2:if(n=eO["".concat(t.publicKey.toBase58(),"-").concat(a)]){e.next=7;break}return eW("warning",h.notifications.proofMissingLink),e.abrupt("return");case 7:return e.prev=7,e.next=10,u.methods.submitProof(a,n).accounts({goals:t.publicKey,taker:o.publicKey}).rpc();case 10:eW("success",h.notifications.proofSubmitted,"".concat(h.stageLabel," #").concat(a+1)),eK(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),console.error(e.t0),eW("error",h.notifications.proofFailed,e.t0.message);case 18:case"end":return e.stop()}},e,null,[[7,14]])})),function(e,a){return t.apply(this,arguments)}),eV=(a=(0,c.Z)(d().mark(function e(t,a,n){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!u||!o.publicKey)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,u.methods.reviewSubgoal(a,n).accounts({goals:t.publicKey,issuer:o.publicKey,takerAccount:t.account.taker}).rpc();case 5:eW(n?"success":"info",n?h.notifications.reviewSuccess:h.notifications.reviewReject),eK(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),eW("error",h.notifications.reviewFailed,e.t0.message);case 13:case"end":return e.stop()}},e,null,[[2,9]])})),function(e,t,n){return a.apply(this,arguments)}),eD=(s=(0,c.Z)(d().mark(function e(t){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,u.methods.triggerSurprise().accounts({goals:t.publicKey,takerAccount:t.account.taker}).rpc();case 5:eW("success",h.notifications.surpriseSuccess),eK(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),eW("error",h.notifications.surpriseFailed,e.t0.message);case 13:case"end":return e.stop()}},e,null,[[2,9]])})),function(e){return s.apply(this,arguments)}),eH=(r=(0,c.Z)(d().mark(function e(t){return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!u||!o.publicKey)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,u.methods.claimUnused().accounts({goals:t.publicKey,issuer:o.publicKey}).rpc();case 5:eW("success",h.notifications.claimSuccess),eK(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),eW("error",h.notifications.claimFailed,e.t0.message);case 13:case"end":return e.stop()}},e,null,[[2,9]])})),function(e){return r.apply(this,arguments)}),eE=function(e){return o.publicKey&&e.account.issuer.equals(o.publicKey)},ez=function(e){return o.publicKey&&e.account.taker.equals(o.publicKey)},eX=function(e,t,a){if(!t.isActive)return null;var n,s,r,i=$(t.status).toLowerCase(),o="".concat(e.publicKey.toBase58(),"-").concat(a);return(0,g.jsxs)("div",{className:"border border-base-300 rounded-lg p-4 flex flex-col gap-2",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm text-slate-500",children:"".concat(h.stageLabel," #").concat(a+1)}),(0,g.jsx)("p",{className:"font-semibold",children:D(t.title)})]}),(0,g.jsx)("span",{className:"badge ".concat(null!==(n=_[i])&&void 0!==n?n:"badge-ghost"),children:null!==(s=h.statusLabels[i])&&void 0!==s?s:i})]}),(0,g.jsxs)("p",{className:"text-xs text-slate-400",children:[h.deadline,": ",ee(t.deadline)]}),(0,g.jsxs)("p",{className:"text-xs text-slate-400",children:[h.incentive,": ",F(t.incentiveAmount)," SOL"]}),ez(e)&&["pending","rejected"].includes(i)&&(0,g.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,g.jsx)("input",{type:"text",placeholder:h.proofPlaceholder,className:"input input-sm input-bordered w-full",value:null!==(r=eO[o])&&void 0!==r?r:"",onChange:function(e){return eT(function(t){return z(z({},t),{},(0,l.Z)({},o,e.target.value))})}}),(0,g.jsx)("button",{className:"btn btn-primary btn-sm",onClick:function(){return eU(e,a)},children:h.submitProof})]}),eE(e)&&"proofsubmitted"===i&&(0,g.jsxs)("div",{className:"flex gap-2",children:[(0,g.jsx)("button",{className:"btn btn-success btn-sm flex-1",onClick:function(){return eV(e,a,!0)},children:h.approve}),(0,g.jsx)("button",{className:"btn btn-outline btn-sm flex-1",onClick:function(){return eV(e,a,!1)},children:h.reject})]})]},a)};return(0,g.jsxs)("div",{className:"mx-auto max-w-7xl px-4 py-10 flex flex-col gap-10",children:[(0,g.jsxs)("section",{className:"space-y-6",children:[(0,g.jsx)("h1",{className:"text-4xl font-semibold text-center",children:h.formTitle}),(0,g.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("label",{className:"form-control w-full",children:[(0,g.jsx)("span",{className:"label-text text-sm",children:h.takerLabel}),(0,g.jsx)("input",{type:"text",placeholder:h.takerPlaceholder,className:"input input-bordered w-full",value:N,onChange:function(e){return k(e.target.value)}})]}),(0,g.jsxs)("label",{className:"form-control w-full",children:[(0,g.jsx)("span",{className:"label-text text-sm",children:h.descriptionLabel}),(0,g.jsx)("textarea",{className:"textarea textarea-bordered",placeholder:h.descriptionPlaceholder,value:w,onChange:function(e){return O(e.target.value)}})]}),(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,g.jsxs)("label",{className:"form-control",children:[(0,g.jsx)("span",{className:"label-text text-sm",children:h.relationLabel}),(0,g.jsx)("select",{className:"select select-bordered",value:JSON.stringify(A),onChange:function(e){return R(JSON.parse(e.target.value))},children:x.map(function(e){return(0,g.jsx)("option",{value:JSON.stringify(e.value),children:e.label},e.key)})})]}),(0,g.jsxs)("label",{className:"form-control",children:[(0,g.jsx)("span",{className:"label-text text-sm",children:h.roomLabel}),(0,g.jsx)("select",{className:"select select-bordered",value:JSON.stringify(P),onChange:function(e){return L(JSON.parse(e.target.value))},children:f.map(function(e){return(0,g.jsx)("option",{value:JSON.stringify(e.value),children:e.label},e.key)})})]})]}),(0,g.jsxs)("label",{className:"form-control",children:[(0,g.jsx)("span",{className:"label-text text-sm",children:h.eventLabel}),(0,g.jsx)("select",{className:"select select-bordered",value:JSON.stringify(V),onChange:function(e){return E(JSON.parse(e.target.value))},children:v.map(function(e){return(0,g.jsx)("option",{value:JSON.stringify(e.value),children:e.label},e.key)})})]}),(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,g.jsxs)("label",{className:"form-control",children:[(0,g.jsx)("span",{className:"label-text text-sm",children:h.totalLabel}),(0,g.jsx)("input",{type:"number",min:"0",className:"input input-bordered",value:ea,onChange:function(e){return en(Number(e.target.value))}})]}),(0,g.jsxs)("label",{className:"form-control",children:[(0,g.jsx)("span",{className:"label-text text-sm",children:h.lockedLabel}),(0,g.jsx)("input",{type:"number",min:"0",className:"input input-bordered",value:er,onChange:function(e){return ei(Number(e.target.value))}})]})]}),eZ&&(0,g.jsxs)("label",{className:"form-control",children:[(0,g.jsx)("span",{className:"label-text text-sm",children:h.checkpointLabel}),(0,g.jsx)("input",{type:"number",min:"1",className:"input input-bordered",value:ev,onChange:function(e){return ej(Number(e.target.value))}})]}),eG&&(0,g.jsxs)("label",{className:"form-control",children:[(0,g.jsx)("span",{className:"label-text text-sm",children:h.surpriseLabel}),(0,g.jsx)("input",{type:"datetime-local",className:"input input-bordered",value:ef,onChange:function(e){return ex(e.target.value)}})]}),(0,g.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,g.jsxs)("label",{className:"form-control",children:[(0,g.jsx)("span",{className:"label-text text-xs",children:h.startLabel}),(0,g.jsx)("input",{type:"datetime-local",className:"input input-bordered",value:el,onChange:function(e){return ec(e.target.value)}})]}),(0,g.jsxs)("label",{className:"form-control",children:[(0,g.jsx)("span",{className:"label-text text-xs",children:h.completionLabel}),(0,g.jsx)("input",{type:"datetime-local",className:"input input-bordered",value:ed,onChange:function(e){return em(e.target.value)}})]}),(0,g.jsxs)("label",{className:"form-control",children:[(0,g.jsx)("span",{className:"label-text text-xs",children:h.unlockLabel}),(0,g.jsx)("input",{type:"datetime-local",className:"input input-bordered",value:eb,onChange:function(e){return eg(e.target.value)}})]})]})]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold",children:h.stageSectionTitle}),eR?(0,g.jsxs)("div",{className:"space-y-3",children:[ek.map(function(e,t){return(0,g.jsxs)("div",{className:"border border-base-300 rounded-lg p-4 space-y-2",children:[(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("p",{className:"text-sm text-slate-400",children:"".concat(h.stageLabel," #").concat(t+1)}),ek.length>1&&(0,g.jsx)("button",{className:"text-xs text-red-400",onClick:function(){return eS(function(e){return e.filter(function(e,a){return a!==t})})},children:h.removeStage})]}),(0,g.jsx)("input",{type:"text",placeholder:h.stageTitlePlaceholder,className:"input input-bordered w-full",value:e.title,onChange:function(e){return eM(t,"title",e.target.value)}}),(0,g.jsx)("input",{type:"datetime-local",className:"input input-bordered w-full",value:e.deadline,onChange:function(e){return eM(t,"deadline",e.target.value)}}),(0,g.jsx)("input",{type:"number",min:"0",placeholder:h.stageAmountPlaceholder,className:"input input-bordered w-full",value:e.amount,onChange:function(e){return eM(t,"amount",e.target.value)}})]},t)}),ek.length<5&&(0,g.jsx)("button",{className:"btn btn-outline btn-sm w-full",onClick:function(){ek.length>=5||eS(function(e){return[].concat((0,B.Z)(e),[z({},q)])})},children:h.addStage})]}):(0,g.jsx)("div",{className:"alert alert-info",children:eZ?h.habitHint:h.surpriseHint}),(0,g.jsx)("button",{className:"btn btn-primary w-full ".concat(eL?"loading":""),onClick:eF,disabled:eL,children:h.launch})]})]})]}),(0,g.jsxs)("section",{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("h2",{className:"text-2xl font-semibold",children:h.listTitle}),(0,g.jsx)("button",{className:"btn btn-sm btn-outline",onClick:eK,children:h.refresh})]}),0===eI.length&&(0,g.jsx)("div",{className:"alert alert-warning",children:h.emptyBanner}),(0,g.jsx)("div",{className:"grid md:grid-cols-2 gap-5",children:eI.map(function(e){return(0,g.jsx)("div",{className:"card bg-base-200 shadow-lg",children:(0,g.jsxs)("div",{className:"card-body space-y-4",children:[(0,g.jsxs)("div",{className:"flex justify-between items-start",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"card-title",children:e.account.description}),(0,g.jsxs)("p",{className:"text-sm text-slate-400",children:[$(e.account.eventype)," \xb7"," ",F(e.account.totalIncentiveAmount)," SOL"]})]}),eE(e)&&(0,g.jsxs)("div",{className:"text-right text-xs text-slate-400",children:[h.info.issuer,(0,g.jsx)("br",{}),e.account.issuer.toBase58().slice(0,8),"…"]})]}),(0,g.jsxs)("div",{className:"text-xs text-slate-500 space-y-1",children:[(0,g.jsxs)("p",{children:[h.info.room,": ",$(e.account.room)]}),(0,g.jsxs)("p",{children:[h.info.relation,": ",$(e.account.relations)]}),(0,g.jsxs)("p",{children:[h.info.completion,": ",ee(e.account.completionTime)]}),(0,g.jsxs)("p",{children:[h.info.unlock,": ",ee(e.account.unlockTime)]})]}),(0,g.jsx)("div",{className:"grid gap-3",children:e.account.subGoals.map(function(t,a){return eX(e,t,a)})}),(0,g.jsxs)("div",{className:"flex flex-wrap gap-2",children:[eG&&ez(e)&&(0,g.jsx)("button",{className:"btn btn-accent btn-sm",onClick:function(){return eD(e)},children:h.triggerSurprise}),eE(e)&&(0,g.jsx)("button",{className:"btn btn-outline btn-sm",onClick:function(){return eH(e)},children:h.claimUnused})]})]})},e.publicKey.toBase58())})})]})]})}},198:function(){},5395:function(){}}]);